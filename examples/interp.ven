# A tiny calculator interpreter

model<Node> QNumber(value) given num;
model<Node> QAdd(left, right) given Node;
model<Node> QSub(left, right) given Node;

fun eval(node) when given Node is
  QAdd => eval(&_.left) + eval(_.right)
  QSub => eval(&_.left) - eval(_.right)
  QNumber => _.value;

expr =
  QAdd(
    QNumber(10),
    QSub(
      QNumber(20),
      QNumber(10)));

say eval(expr);

